<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Men</title>
    <link rel="stylesheet" href="style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:opsz@8..60&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
   
</head>
<body>

    <div id="nav">
        <div><a href="index.html"><img id="shopifyLogo" src="logo.png" alt=""></a></a></div>
        <div>
            <a href="mens.html">MEN</a>
            <a href="women.html">WOMEN</a>
            <a href="kid.html">KIDS</a>
            <a href="cart.html">CART</a>
            <a href="signup.html">SIGNUP</a>
            <a href="login.html">LOGIN</a>
        </div>
    </div>

    <div class="carousel" style="margin-top:5.5%;" data-flickity='{ "wrapAround": true, "autoPlay": true, "imagesLoaded":true }' id="upside">
        <div class="carousel-cell">
            <img class="w3-image" src="https://assets.ajio.com/cms/AJIO/WEB/15022023-WHP-D-topbanner-p2-veromoda-misschase-starting299-extra30.jpg">
          </div>
  
        
        <div class="carousel-cell">
          <img class="w3-image" src="https://assets.myntassets.com/f_webp,w_980,c_limit,fl_progressive,dpr_2.0/assets/images/2022/5/3/a20271c6-249f-480b-bcc7-1b150516e54e1651599573998-Dressberry_Desk.jpg">
        </div>

        <div class="carousel-cell">
          <img class="w3-image" src="https://assets.ajio.com/cms/AJIO/WEB/15022023-WHP-D-dailybanner-p5-ishin-aks-min60-extraupto25.jpg">
        </div>

        <div class="carousel-cell">
          <img class="w3-image" src="https://assets.ajio.com/cms/AJIO/WEB/15022023-WHP-D-topbanner-p2-veromoda-misschase-starting299-extra30.jpg">
        </div>

        <div class="carousel-cell">
            <img class="w3-image" src="https://assets.ajio.com/cms/AJIO/WEB/16022023-WHP-D-topbanner-p3-max-upto50.jpg">
          </div>

          <div class="carousel-cell">
            <img class="w3-image" src="https://assets.ajio.com/cms/AJIO/WEB/16022023-D-KHP-banner1-p2-brands-min60.jpg">
          </div>

          <div class="carousel-cell">
            <img class="w3-image" src="https://assets.ajio.com/cms/AJIO/WEB/16022023-d-mhp-daily-p3-brands-starting499.jpg">
          </div>

          <div class="carousel-cell">
            <img class="w3-image" src="https://assets.ajio.com/cms/AJIO/WEB/15022023-D-KHP-banner1-p2-brands-min40.jpg">
          </div>

      </div>
    </div>

    <div id="totalCart" style="margin-top: 3%; padding-left: 6%;display: flex;">
        <h3 style="margin-right: 1%;">Cart Total:</h3>
        <h3>0</h3>
    </div>

    <div id="productsContainer"></div>

    <div id="footer" style="margin-top: 10%;">
        
        <div>
            <div><img src="https://adn-static2.nykaa.com/media/wysiwyg/2021/Free-shipping.svg" alt=""></div>
            <div>
                <p>FREE SHIPPING</p>
                <hr>
                <p>On Orders Above</p>
                <p>₹299</p>
            </div>
        </div>

        <div>
            <div><img src="https://adn-static2.nykaa.com/media/wysiwyg/2021/return_accepted.svg" alt=""></div>
            <div>
                <p>EASY RETURNS</p>
                <hr>
                <p>15-Day Return Policy</p>
            </div>
        </div>
        
        <div>
            <div><img src="https://adn-static2.nykaa.com/media/wysiwyg/2021/Authenticity.svg" alt=""></div>
            <div>
                <p>100%</p>
                <p>AUTHENTIC</p>
                <hr>
                <p>Products Sourced Directly</p>
            </div>
        </div>

        <div>
            <div><img src="https://adn-static2.nykaa.com/media/wysiwyg/2021/Brands.svg" alt=""></div>
            <div>
                <p>100%</p>
                <p>1900+ BRANDS</p>
                <hr>
                <p>1.2 Lakh+ Products</p>
            </div>
        </div>

        <div>
            <div><p>Show us some love ❤ on social media</p></div>
            <hr>
            <div>
               <img src="https://images-static.naikaa.com/media/wysiwyg/2021/icons/ic_social-instagram-filled.svg" alt="">
               <img src="https://images-static.naikaa.com/media/wysiwyg/2021/icons/ic_social-facebook-filled.svg" alt="">
               <img src="https://images-static.naikaa.com/media/wysiwyg/2021/icons/ic_social-youtube-filled.svg" alt="">
               <img src="https://images-static.naikaa.com/media/wysiwyg/2021/icons/ic_social-twitter-filled.svg" alt="">
               <img src="https://images-static.naikaa.com/media/wysiwyg/2021/icons/ic_social-pinterest-filled.svg" alt="">
            </div>
        </div>
</div>
</body>
</html>
<script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>

<script>


    let loggedDetails = {
        userName : localStorage.getItem("loggedUserEmail"),
        password : localStorage.getItem("loggedUserPassword")
     };

     if(loggedDetails.userName !=null && loggedDetails.password != null){
        document.querySelector("#nav>div:nth-child(2)").innerHTML = 
        ` <a href="mens.html">MEN</a>
            <a href="women.html">WOMEN</a>
            <a href="kid.html">KIDS</a>
            <a href="cart.html">CART</a>
            <a href="logout.html">LOGOUT</a>`;
    }
    
    let productsContainer = document.querySelector("#productsContainer");

    let cartProducts =JSON.parse(localStorage.getItem("Cart_Products")) || [];
    displayProducts(cartProducts);

    function displayProducts(products){
        productsContainer.innerHTML="";

        products.forEach(function(element,index) {

            let box = document.createElement("div");    

            let imgDiv = document.createElement("img");
            imgDiv.setAttribute("src",element.avatar);

            let detailsDiv = document.createElement("div");

            let title = document.createElement("h3");
            title.innerText = element.title;

            let desc = document.createElement("p");
            desc.innerText= element.desc;

            detailsDiv.append(title,desc);

            let priceDiv = document.createElement("h4");
            let sellPrice = "₹" + element.price;
            priceDiv.innerText = sellPrice;

            let off = document.createElement("p");
            let mrp= "MRP Rs." + element.offer;
            off.innerText = mrp;

            let priceOff = document.createElement("div");
            priceOff.append(priceDiv,off);

            let cartButton = document.createElement("button");
            cartButton.innerText = "Remove";

            cartButton.addEventListener("click",function(){
                removeProduct(element,index);
            });

            box.append(imgDiv,detailsDiv,priceOff,cartButton);
            productsContainer.append(box);
        });
    }

    let cartTotal = 0;

    cartProducts.forEach(element => {
        cartTotal = eval(element.price) + eval(cartTotal); 
    });
    
    document.querySelector("#totalCart>h3:nth-child(2)").innerText = "";
    document.querySelector("#totalCart>h3:nth-child(2)").innerText = cartTotal;



    function removeProduct(element,index){
        cartProducts.splice(index,1);
        localStorage.setItem("Cart_Products",JSON.stringify(cartProducts));
        displayProducts(cartProducts);
        setTimeout(() => alert("Product Removed."), 50);
        if(productsContainer.innerHTML==""){
        productsContainer.innerText = "Your cart is Empty."
        productsContainer.style.marginTop ="100px";
        productsContainer.style.textAlign= "center";
        productsContainer.style.fontWeight="Bolder";
        productsContainer.style.fontSize = "24px"
        productsContainer.style.display="flex";
        productsContainer.style.justifyContent = "center";
    }

    // ------- CART TOTAL --------
    let cartTotal = 0;

    cartProducts.forEach(element => {
        cartTotal = eval(element.price) + eval(cartTotal); 
    });
    
    document.querySelector("#totalCart>h3:nth-child(2)").innerText = "";
    document.querySelector("#totalCart>h3:nth-child(2)").innerText = cartTotal;


    }

    if(productsContainer.innerHTML==""){
        productsContainer.innerText = "Your cart is Empty."
        productsContainer.style.marginTop ="100px";
        productsContainer.style.textAlign= "center";
        productsContainer.style.fontWeight="Bolder";
        productsContainer.style.fontSize = "24px"
        productsContainer.style.display="flex";
        productsContainer.style.justifyContent = "center";
    }


</script>